import{d as e,o as t,c as a,w as l,T as s,a as n,b as o,t as i,r as u,e as c,f as r,h as d,g as v,m as p,i as g,j as E,n as m,k as f,u as C,F as V,l as b,p as y,q as _,s as O}from"./vendor-DF3oRLcr.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const w={class:"dialog-header"},k={class:"dialog-content"},D={key:0,class:"dialog-footer"},N=e({__name:"Dialog",props:{modelValue:{type:Boolean,default:!1},title:{default:"提示"},closeOnClickOverlay:{type:Boolean,default:!0},content:{default:void 0},footer:{default:void 0}},emits:["update:modelValue"],setup(e,{emit:d}){const v=d,p=()=>{v("update:modelValue",!1)};let g=null;const E=e=>{g={x:e.clientX,y:e.clientY}},m=e=>{if(g){const t=document.querySelector(".dialog-container"),a=null==t?void 0:t.getBoundingClientRect();if(a){const t=g.x>=a.left&&g.x<=a.right&&g.y>=a.top&&g.y<=a.bottom,l=e.clientX>=a.left&&e.clientX<=a.right&&e.clientY>=a.top&&e.clientY<=a.bottom;t||l||p()}}g=null};return(e,d)=>(t(),a(s,{name:"dialog-fade"},{default:l((()=>[e.modelValue?(t(),n("div",{key:0,class:"dialog-overlay",onMousedown:E,onMouseup:m},[o("div",{class:"dialog-container",onClick:d[1]||(d[1]=c((()=>{}),["stop"]))},[o("div",w,[o("h3",null,i(e.title),1),o("button",{class:"close-btn",onClick:p},"×")]),o("div",k,[(t(),a(u(e.content),{onClick:d[0]||(d[0]=c((()=>{}),["stop"]))}))]),e.footer?(t(),n("div",D,[(t(),a(u(e.footer)))])):r("",!0)])],32)):r("",!0)])),_:1}))}});function I(e){const{title:t="提示",content:a={},closeOnClickOverlay:l=!0,footer:s=null,onClose:n=()=>{},onOpen:o=()=>{},className:i=""}=e,u=document.createElement("div");i&&u.classList.add(i),document.body.appendChild(u);const c={visible:v(!0),title:v(t),content:v(p(a))},r=()=>{m.unmount(),u.remove(),n(),c.currentDialog=void 0},m=g({setup:()=>(E((()=>o())),()=>d(N,{modelValue:c.visible.value??!1,"onUpdate:modelValue":e=>{c.visible.value=e,e||r()},title:c.title.value??"",closeOnClickOverlay:l,class:i,content:c.content.value,footer:s}))});m.mount(u);const f={close:()=>{c.visible.value=!1,r()},updateContent:e=>{c.content.value=e},updateTitle:e=>{c.title.value=e}};return c.currentDialog=f,f}function T(e,t={}){const a=I({title:"警告",content:{setup:()=>()=>d("h3",{class:"data-detail"},e)},footer:{setup:()=>()=>d("div",{class:"dialog-footer"},[d("button",{onClick:()=>a.close(),style:{backgroundColor:"var(--error-color)",color:"white"}},"确定")])},className:"alert-dialog",...t});return a}const R=(e,t,a)=>{const l=I({title:e,content:{setup:()=>()=>d("div",{class:"dialog-content"},[d("p",null,t)])},footer:{setup:()=>()=>d("div",{class:"dialog-footer"},[d("button",{onClick:()=>l.close(),class:"cancel-btn"},"取消"),d("button",{onClick:()=>{a(),l.close()},class:"confirm-btn"},"确定")])}})},h=(e,t)=>e.toFixed(t).padStart(5,"0"),M=e=>{let t=0;for(let a=0;a<4;a++)t+=e[a];return t&=65535,t},A=e=>({FunctionCode:e[1]<<8|e[0],Value:e[3]<<8|e[2],CheckValue:e[5]<<8|e[4]}),U=(e,t)=>"efficiency"===e||"power"===e?t.toFixed(1):h(t,2);var S=(e=>(e[e.EN=0]="EN",e[e.VREF=1]="VREF",e[e.IREF=2]="IREF",e[e.OUT_MODE=3]="OUT_MODE",e[e.CLEAR_ERROR=4]="CLEAR_ERROR",e[e.ASK_DEVICE_NAME=5]="ASK_DEVICE_NAME",e))(S||{}),x=(e=>(e[e.VIN=0]="VIN",e[e.IIN=1]="IIN",e[e.VOUT=2]="VOUT",e[e.IOUT=3]="IOUT",e[e.RUN_ERROR_TYPE=4]="RUN_ERROR_TYPE",e[e.RUN_MODE=5]="RUN_MODE",e[e.OUT_MODE=6]="OUT_MODE",e[e.EN=7]="EN",e[e.TargetV=8]="TargetV",e[e.TargetI=9]="TargetI",e[e.DEVICE_NAME_START=10]="DEVICE_NAME_START",e[e.DEVICE_NAME=11]="DEVICE_NAME",e[e.DEVICE_NAME_END=12]="DEVICE_NAME_END",e))(x||{});const L=4096,F=.025458984375,$=3.3/1269.76,P=L/104.28,B=1269.76/3.3,H={class:"section status-section"},Y={class:"port-config"},K={class:"connection-status"},j={class:"device-info"},X={key:0,class:"device-name"},q={class:"input-parameters"},W={class:"card-grid"},G={class:"card"},z={class:"value-container"},J={class:"value-display"},Q={class:"value-display value-animation",ref:"inputVoltageAnimation"},Z={class:"card"},ee={class:"value-container"},te={class:"value-display"},ae={class:"value-display value-animation",ref:"inputCurrentAnimation"},le=(e,t)=>{const a=e.__vccOpts||e;for(const[l,s]of t)a[l]=s;return a},se=le(e({__name:"Device",props:{inputVoltage:{},inputCurrent:{},deviceName:{}},setup(e,{expose:a,emit:l}){const s=e,u=l,c=v(s.inputVoltage),d=v(s.inputCurrent),p=v(),g=v(!1);let E,V=[],b=0,y=[];const _=async()=>{"serial"in navigator?g.value?await w():await O():T("浏览器不支持串口通信")},O=async()=>{try{p.value=await navigator.serial.requestPort({filters:[{usbVendorId:1155}]}),await p.value.open({baudRate:115200}),g.value=!0;const e=new Uint8Array([255&S.ASK_DEVICE_NAME,S.ASK_DEVICE_NAME>>8&255,0,0,0,0]),t=M(e);e[4]=255&t,e[5]=t>>8&255,N(e,0,"设备名称"),k()}catch(e){T("未选择设备或者串口连接失败"),await w()}},w=async()=>{try{E&&(await E.cancel(),E.releaseLock()),p.value&&await p.value.close(),u("updateDeviceName","")}catch(e){}finally{p.value=void 0,g.value=!1,clearTimeout(b),b=0,V=[]}};navigator.serial.addEventListener("disconnect",(e=>{w(),T("设备已经断开连接"),u("updateDeviceName","")}));const k=async()=>{var e;if((null==(e=p.value)?void 0:e.readable)&&(E=p.value.readable.getReader(),E))try{for(;g.value;){const{value:e,done:t}=await E.read();if(t)break;e&&(V.push(...Array.from(e)),0===b&&(b=window.setTimeout(D,50)))}}catch(t){}finally{null==E||E.releaseLock()}};const D=()=>{var e;if(clearTimeout(b),b=0,6===V.length){const t=new Uint8Array(V),a=A(t);if(M(t)!==a.CheckValue)return void(V=[]);const l=a.Value,s={[x.VIN]:()=>{u("updateInputVoltageEvent",l*F)},[x.IIN]:()=>{u("updateInputCurrentEvent",l*$)},[x.VOUT]:()=>{u("updateOutputVoltageEvent",l*F)},[x.IOUT]:()=>{u("updateOutputCurrentEvent",l*$)},[x.RUN_ERROR_TYPE]:()=>{u("updateRunErrorTypeEvent",l)},[x.RUN_MODE]:()=>{u("updateRunModeEvent",l)},[x.OUT_MODE]:()=>{u("updateOutModeEvent",l)},[x.EN]:()=>{u("updateEnEvent",l)},[x.TargetV]:()=>{u("updateTargetVEvent",l*F)},[x.TargetI]:()=>{u("updateTargetIEvent",l*$)},[x.DEVICE_NAME_START]:()=>{y=[],u("updateDeviceName","加载中...")},[x.DEVICE_NAME]:()=>{y.push(l)},[x.DEVICE_NAME_END]:()=>{const e=y.slice(0,-1).map((e=>String.fromCharCode(255&e))).join("");u("updateDeviceName",e),y=[]}};null==(e=s[a.FunctionCode])||e.call(s),u("addDataHistoryEvent",t,"received")}V=[]},N=(e,t,a="未知")=>{var l;if(!(null==(l=p.value)?void 0:l.writable))return T("请先连接设备"),!1;const s=p.value.writable.getWriter();return s.write(e),s.releaseLock(),!0};return a({disconnectDevice:w,sendData:N}),(e,a)=>(t(),n("div",H,[a[6]||(a[6]=o("h3",null,"设备状态",-1)),o("div",Y,[o("div",K,[o("i",{class:m(["status-icon",{connected:g.value}])},null,2),o("div",j,[o("span",null,i(void 0===p.value?"未连接":"已连接"),1),e.deviceName?(t(),n("div",X,i(e.deviceName),1)):r("",!0)])]),o("button",{class:"connect-btn",onClick:_},i(g.value?"断开连接":"选择设备"),1)]),o("div",q,[o("div",W,[o("div",G,[a[2]||(a[2]=o("span",{class:"output-label"},"电压",-1)),o("div",z,[o("span",J,[f(i(C(h)(e.inputVoltage,2))+" ",1),a[0]||(a[0]=o("small",null,"V",-1))]),o("span",Q,[f(i(C(h)(c.value,2))+" ",1),a[1]||(a[1]=o("small",null,"V",-1))],512)])]),o("div",Z,[a[5]||(a[5]=o("span",{class:"output-label"},"电流",-1)),o("div",ee,[o("span",te,[f(i(C(h)(e.inputCurrent,2))+" ",1),a[3]||(a[3]=o("small",null,"A",-1))]),o("span",ae,[f(i(C(h)(d.value,2))+" ",1),a[4]||(a[4]=o("small",null,"A",-1))],512)])])])])]))}}),[["__scopeId","data-v-d27a7c24"]]),ne={class:"section output-section"},oe={class:"card-grid"},ie={class:"card"},ue={class:"value-container"},ce={class:"value-display"},re={class:"card"},de={class:"value-container"},ve={class:"value-display"},pe={class:"card"},ge={class:"value-container"},Ee={class:"value-display"},me={class:"card"},fe={class:"value-container"},Ce={class:"value-display"},Ve=le(e({__name:"Output",props:{inputVoltage:{},inputCurrent:{},outputVoltage:{},outputCurrent:{}},setup(e,{expose:a}){const l=e,s=v(l.inputVoltage),u=v(l.inputCurrent),c=v(0),r=v(0),d=v(),p=v(),g=()=>{r.value=l.outputVoltage*l.outputCurrent;const e=l.inputVoltage*l.inputCurrent;e>0&&(c.value=Math.min(r.value/e*100,100))},E=e=>{const t="voltage"===e?d:p;(null==t?void 0:t.value)&&(t.value.classList.remove("fade-in"),t.value.offsetWidth,t.value.classList.add("fade-in"))};return a({updateOutputVoltage:e=>{const t=s;t.value!==e&&(t.value=e,g(),E("voltage"))},updateOutputCurrent:e=>{const t=u;t.value!==e&&(t.value=e,g(),E("current"))}}),(e,a)=>(t(),n("div",ne,[a[10]||(a[10]=o("h3",null,"输出参数",-1)),o("div",oe,[o("div",ie,[a[2]||(a[2]=o("span",{class:"output-label"},"电压",-1)),o("div",ue,[o("span",ce,[f(i(C(h)(e.outputVoltage,2))+" ",1),a[0]||(a[0]=o("small",null,"V",-1))]),o("span",{class:"value-display value-animation",ref_key:"voltageAnimation",ref:d},[f(i(C(h)(s.value,2))+" ",1),a[1]||(a[1]=o("small",null,"V",-1))],512)])]),o("div",re,[a[5]||(a[5]=o("span",{class:"output-label"},"电流",-1)),o("div",de,[o("span",ve,[f(i(C(h)(e.outputCurrent,2))+" ",1),a[3]||(a[3]=o("small",null,"A",-1))]),o("span",{class:"value-display value-animation",ref_key:"currentAnimation",ref:p},[f(i(C(h)(u.value,2))+" ",1),a[4]||(a[4]=o("small",null,"A",-1))],512)])]),o("div",pe,[a[7]||(a[7]=o("span",{class:"output-label"},"效率",-1)),o("div",ge,[o("span",Ee,[f(i(C(U)("efficiency",c.value))+" ",1),a[6]||(a[6]=o("small",null,"%",-1))])])]),o("div",me,[a[9]||(a[9]=o("span",{class:"output-label"},"功耗",-1)),o("div",fe,[o("span",Ce,[f(i(C(U)("power",r.value))+" ",1),a[8]||(a[8]=o("small",null,"W",-1))])])])])]))}}),[["__scopeId","data-v-4d2a0c9c"]]),be={class:"section target-settings"},ye={class:"target-controls"},_e={class:"target-group"},Oe={class:"target-value"},we={class:"target-value"},ke={class:"control-group"},De={class:"power-controls"},Ne={class:"mode-controls"},Ie=le(e({__name:"TargetSet",props:{workStatus:{},outMode:{},targetVoltage:{},targetCurrent:{}},setup(e,{emit:a}){const l=e,s=a,u=e=>{e?R("电源开关",`确定要${e?"开启":"关闭"}电源吗？`,(()=>{l.workStatus&&e||s("sendDataEvent",S.EN,!l.workStatus)})):s("sendDataEvent",S.EN,0)},c=e=>{R("切换模式",`确定要切换到${0===e?"CV":"CC"}模式吗？`,(()=>{l.outMode!==e&&s("sendDataEvent",S.OUT_MODE,l.outMode)}))},r=e=>{const t="voltage"===e,a=v(t?l.targetVoltage:l.targetCurrent),n=h(a.value,2),o=t?80:5,i=t?"V":"A",u=v(!0),c=I({title:"设置"+(t?"电压":"电流"),content:{setup:()=>()=>d("div",{class:"dialog-input-container"},[d("input",{type:"number",value:n,class:"dialog-input",placeholder:`请输入${t?"电压":"电流"}值`,onInput:e=>{const t=e.target.value,l=parseFloat(t);a.value=l}}),d("span",{class:"dialog-unit"},i)])},footer:{setup:()=>()=>d("div",{class:"dialog-footer"},[d("button",{onClick:()=>c.close(),class:"cancel-btn"},"取消"),d("button",{onClick:()=>{u.value?a.value>o||a.value<0?alert(`请输入有效的${t?"电压":"电流"}值！`):u.value=!1:(t?s("sendDataEvent",S.VREF,a.value*P):s("sendDataEvent",S.IREF,a.value*B),c.close())},class:"confirm-btn"},u.value?"检查":"确定")])}})};return(e,a)=>(t(),n("div",be,[a[9]||(a[9]=o("h3",null,"目标设定",-1)),o("div",ye,[o("div",_e,[o("div",{class:"target-card",onClick:a[0]||(a[0]=e=>r("voltage"))},[o("div",Oe,i(C(h)(e.targetVoltage,2))+"V",1),a[6]||(a[6]=o("div",{class:"target-label"},"设置电压",-1))]),o("div",{class:"target-card",onClick:a[1]||(a[1]=e=>r("current"))},[o("div",we,i(C(h)(e.targetCurrent,2))+"A",1),a[7]||(a[7]=o("div",{class:"target-label"},"设置电流",-1))])]),o("div",ke,[o("div",De,[o("button",{class:m(["power-btn",{active:e.workStatus}]),onClick:a[2]||(a[2]=e=>u(1))},a[8]||(a[8]=[o("img",{src:"data:image/svg+xml,%3c?xml%20version='1.0'%20standalone='no'?%3e%3c!DOCTYPE%20svg%20PUBLIC%20'-//W3C//DTD%20SVG%201.1//EN'%20'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'%3e%3csvg%20t='1733847952494'%20class='icon'%20viewBox='0%200%201024%201024'%20version='1.1'%20xmlns='http://www.w3.org/2000/svg'%20p-id='4318'%20data-darkreader-inline-fill=''%20xmlns:xlink='http://www.w3.org/1999/xlink'%20width='256'%20height='256'%3e%3cpath%20d='M561.312102%2068.191078l-98.624205%200%200%20493.121024%2098.624205%200L561.312102%2068.191078zM799.735283%20174.951591l-69.77618%2069.77618c77.420277%2063.36619%20127.225613%20159.27761%20127.225613%20267.271206%200%20190.590779-154.592914%20345.184717-345.184717%20345.184717S166.815283%20702.590779%20166.815283%20512c0-107.993596%2049.805336-203.905016%20127.225613-267.271206l-69.77618-69.77618C129.0911%20256.316713%2068.191078%20376.884696%2068.191078%20512c0%20245.080811%20198.72811%20443.808922%20443.808922%20443.808922s443.808922-198.72811%20443.808922-443.808922C955.808922%20376.884696%20894.907876%20256.316713%20799.735283%20174.951591z'%20p-id='4319'%3e%3c/path%3e%3c/svg%3e",alt:"power",class:"power-icon"},null,-1),f(" 开机 ")]),2),o("button",{class:"power-btn off",onClick:a[3]||(a[3]=e=>u(0))}," 关机 ")]),o("div",Ne,[o("button",{class:m({active:!e.outMode}),onClick:a[4]||(a[4]=e=>c(0))}," CV ",2),o("button",{class:m({active:e.outMode}),onClick:a[5]||(a[5]=e=>c(1))}," CC ",2)])])])]))}}),[["__scopeId","data-v-7045b14b"]]),Te={class:"section power-status"},Re={class:"status-tabs"},he={class:"status-tab"},Me={class:"status-options"},Ae={class:"status-tab"},Ue={class:"status-options"},Se={class:"status-options error-options"},xe=le(e({__name:"PowerStatus",props:{runMode:{},faultType:{},workStatus:{}},setup(e,{emit:a}){const l=a,s=["未工作","工作中"],u=["BUCK","BOOST","MIXED"],c=new Map([[1,"输入欠压"],[2,"输入过压"],[3,"输出欠压"],[4,"输出过压"],[5,"输入过流"],[6,"输出过流"],[7,"输出短路"],[8,"温度过高"],[0,"正常"]]),r=()=>{R("消除故障","确定要消除故障吗？",(()=>{l("sendDataEvent",S.CLEAR_ERROR,0)}))};return(e,a)=>(t(),n("div",Te,[a[3]||(a[3]=o("h3",null,"电源状态",-1)),o("div",Re,[o("div",he,[a[0]||(a[0]=o("div",{class:"status-label"},"工作状态",-1)),o("div",Me,[(t(),n(V,null,b(s,(t=>o("span",{key:t,class:m(["status-option",{active:e.workStatus===s.indexOf(t)}])},i(t),3))),64))])]),o("div",Ae,[a[1]||(a[1]=o("div",{class:"status-label"},"工作模式",-1)),o("div",Ue,[(t(),n(V,null,b(u,(t=>o("span",{key:t,class:m(["status-option",{active:e.runMode===u.indexOf(t)}])},i(t),3))),64))])]),o("div",{class:"status-tab",onClick:r},[a[2]||(a[2]=o("div",{class:"status-label"},"故障类型",-1)),o("div",Se,[(t(!0),n(V,null,b(Array.from(C(c).values()),((a,l)=>(t(),n("span",{key:l,class:m(["status-option",{active:a===C(c).get(e.faultType)}])},i(a),3)))),128))])])])]))}}),[["__scopeId","data-v-3070a6bf"]]),Le={class:"section"},Fe={class:"info-container"},$e={class:"info"},Pe=["onClick"],Be={class:"type"},He={class:"message"},Ye=e({__name:"Historical",props:{dataHistory:{}},setup(e,{emit:a}){const l=a;function s(e,t){try{const a=new Uint8Array(e.split(" ").map((e=>parseInt(e,16)))),l=A(a),s={[S.VREF]:`设置电压: ${h(l.Value*P,2)} V`,[S.IREF]:`设置电流: ${h(l.Value*B,2)} A`,[S.EN]:""+(l.Value?"开机":"关机"),[S.OUT_MODE]:"设置模式: "+(l.Value?"CC":"CV"),[S.CLEAR_ERROR]:"清楚故障"},n={[x.VIN]:`输入电压: ${h(l.Value*F,2)} V`,[x.IIN]:`输入电流: ${h(l.Value*$,2)} A`,[x.VOUT]:`输出电压: ${h(l.Value*F,2)} V`,[x.IOUT]:`输出电流: ${h(l.Value*$,2)} A`,[x.RUN_ERROR_TYPE]:"错误类型: ",[x.RUN_MODE]:"运行模式:"+(2==l.Value?"MIX":l.Value?"BOOST":"BUCK"),[x.OUT_MODE]:"输出模式: "+(l.Value?"CC":"CV"),[x.EN]:"工作状态: "+(l.Value?"工作中":"未工作"),[x.TargetV]:`设定电压: ${h(l.Value*F,2)}`,[x.TargetI]:`设定电流: ${h(l.Value*$,2)}`};return t?s[l.FunctionCode]:n[l.FunctionCode]}catch(a){return"数据解析错误"}}const u=()=>{l("clearDataHistoryEvent")};return(e,a)=>(t(),n("div",Le,[a[0]||(a[0]=o("h3",null,"发送/接收数据",-1)),o("div",Fe,[o("ul",$e,[(t(!0),n(V,null,b(e.dataHistory,((e,a)=>(t(),n("li",{key:a,class:m([e.type,"clickable"]),onClick:t=>(e=>{const t=I({title:"数据详情",content:{setup:()=>()=>d("div",{class:"data-detail"},[d("div",{class:"detail-item"},[d("span",{class:"detail-label"},"类型:"),d("span",{class:"detail-value"},"sent"===e.type?"发送":"接收")]),d("div",{class:"detail-item"},[d("span",{class:"detail-label"},"时间:"),d("span",{class:"detail-value"},e.timestamp)]),d("div",{class:"detail-item"},[d("span",{class:"detail-label"},"数据:"),d("span",{class:"detail-value"},e.message)]),d("div",{class:"detail-item"},[d("span",{class:"detail-label"},"解释:"),d("span",{class:"detail-value"},s(e.message,"sent"===e.type))])])},footer:{setup:()=>()=>d("button",{onClick:()=>t.close()},"关闭")}})})(e)},[o("span",Be,i("sent"===e.type?"发送":"接收")+":",1),o("span",He,i(e.message),1)],10,Pe)))),128))]),o("button",{class:"clear-btn",onClick:u,title:"清除历史记录"})])]))}}),Ke={class:"section about"};const je=le({},[["render",function(e,a){return t(),n("div",Ke,a[0]||(a[0]=[y('<div class="avatar-container" data-v-d1b935a9><div class="avatar-image" data-v-d1b935a9></div></div><div class="social-links" data-v-d1b935a9><a href="https://github.com/xiaowine" target="_blank" class="social-icon github-icon" data-v-d1b935a9></a><a href="https://space.bilibili.com/393492876" target="_blank" class="social-icon bilibili-icon" data-v-d1b935a9></a><a href="https://oshwhub.com/xiao_wine" target="_blank" class="social-icon jlc-icon" data-v-d1b935a9></a></div><div class="author-name" data-v-d1b935a9>xiao_wine</div>',3)]))}],["__scopeId","data-v-d1b935a9"]]),Xe={name:"power-control",private:!0,version:"0.0.1",type:"module",scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{vue:"^3.5.13"},devDependencies:{"@vitejs/plugin-vue":"^5.2.1",vite:"^6.0.3","vite-plugin-compression":"^0.5.1",terser:"^5.37.0",typescript:"^5.7.2","vue-tsc":"^2.1.10","@types/node":"^22.10.1"}},qe={class:"power-control-system fade-in"},We={id:"version"};g(e({__name:"App",setup(e){const a=v(),l=v(),s=v(""),u=v(0),c=v(0),r=v(0),d=v(0),p=v(0),g=v(0),E=v(0),m=v(0),f=v(0),b=v(0),y=v([]);_((()=>{a.value.disconnectDevice()}));const w=e=>{s.value=e},k=()=>{y.value=[]},D=(e,t)=>{const l=new Uint8Array([255&e,e>>8&255,255&t,t>>8&255,0,0]),s=M(l);l[4]=255&s,l[5]=s>>8&255,a.value.sendData(l,t)&&N(l,"sent")},N=(e,t="received")=>{const a=Array.from(e).map((e=>e.toString(16).padStart(2,"0"))).join(" "),l=(new Date).toLocaleString();y.value.length>=100&&y.value.pop(),y.value.unshift({message:a,type:t,timestamp:l})},I=e=>{r.value=e,l.value.updateOutputVoltage(e)},T=e=>{d.value=e,l.value.updateOutputCurrent(e)},R=e=>{u.value=e},h=e=>{c.value=e},A=e=>{b.value=e},U=e=>{m.value=e},S=e=>{f.value=e},x=e=>{E.value=e},L=e=>{p.value=e},F=e=>{g.value=e};return(e,v)=>(t(),n(V,null,[o("div",qe,[O(se,{ref_key:"device",ref:a,inputCurrent:c.value,inputVoltage:u.value,deviceName:s.value,onUpdateOutputVoltageEvent:I,onUpdateOutputCurrentEvent:T,onUpdateInputVoltageEvent:R,onUpdateInputCurrentEvent:h,onAddDataHistoryEvent:N,onUpdateRunErrorTypeEvent:A,onUpdateRunModeEvent:U,onUpdateOutModeEvent:S,onUpdateEnEvent:x,onUpdateTargetVEvent:L,onUpdateTargetIEvent:F,onUpdateDeviceName:w},null,8,["inputCurrent","inputVoltage","deviceName"]),O(Ve,{ref_key:"output",ref:l,inputCurrent:c.value,inputVoltage:u.value,outputVoltage:r.value,outputCurrent:d.value},null,8,["inputCurrent","inputVoltage","outputVoltage","outputCurrent"]),O(Ie,{outMode:f.value,workStatus:E.value,onSendDataEvent:D,targetVoltage:p.value,targetCurrent:g.value},null,8,["outMode","workStatus","targetVoltage","targetCurrent"]),O(xe,{workStatus:E.value,runMode:m.value,outMode:f.value,faultType:b.value,onSendDataEvent:D},null,8,["workStatus","runMode","outMode","faultType"]),O(Ye,{dataHistory:y.value,onClearDataHistoryEvent:k},null,8,["dataHistory"]),O(je)]),o("div",We,i(C(Xe).version),1)],64))}})).mount("#app");
